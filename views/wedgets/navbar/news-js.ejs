<script>
    $(function () {
        console.log('news JS 2')
        $('#more_news').click(async (e) => {
            e.preventDefault()
            
            let api = e.target.dataset.api
            const {
                data: {
                    errno, data, msg
                }
            } = await axios.get(api)
            if (!errno) {
                let { str, more, index } = data
                let news_arr = $('#newList').children('li')
                let target = news_arr[news_arr.length - 4]
                $(target).after(str)
                if(more){
                    $('#more_news').attr('data-api', `/api/user/moreNews?index=${index}`)
                }else{
                    $('#more_news').parent().toggle()
                    $('#nonews').toggle()
                }
                console.log('ok')
            } else {
                alert(msg)
            }
        })

        $('#navbarDropdown').click(async (e) => {
            e.preventDefault()
            if($('.news-count')){
                let comfirm_time = $('#navbarDropdown').attr('data-comfirm_time')
                console.log('@@= >', comfirm_time)
                const {
                    data: {
                        errno, data, msg
                    }
                } = await axios.get(`/api/user/news_confirm?comfirm_time=${comfirm_time}`)
                !errno && console.log('ok')
                errno && console.log('noooo')
            } 
        })
    })
console.log('news JS 1')
</script>